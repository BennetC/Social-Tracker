<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platform Ratings - Social Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='platforms.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/js/all.min.js"></script>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1><i class="fas fa-medal"></i> Platform Priority Ratings</h1>
            <a href="{{ url_for('index') }}" class="back-link"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
        </div>
    </div>
    <div class="container">
        <table>
            <thead>
                <tr>
                    <th>Platform Name</th>
                    <th>User Count</th>
                    <th>Priority Score</th>
                    <th>Rating</th>
                </tr>
            </thead>
            <tbody>
                {% for platform in platforms %}
                <tr>
                    <td><strong>{{ platform.name }}</strong></td>
                    <td>{{ platform.registered_users }}</td>
                    <td>{{ "%.2f"|format(platform.priority_rating) }}</td>
                    <td style="width: 30%;">
                        <div class="score-bar-container">
                             <!-- Simple visualization; max score is arbitrary, adjust as needed -->
                            <div class="score-bar" style="width: {{ [100, (platform.priority_rating / 10) * 100]|min }}%;"></div>
                        </div>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="4" style="text-align: center;">No platforms found. Run 'flask seed' and add relationships.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>