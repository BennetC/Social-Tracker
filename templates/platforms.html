{% extends "base.html" %}

{% block title %}Platform Ratings - Social Tracker{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='platforms.css') }}">
{% endblock %}

{% block header_nav %}
     <a href="{{ url_for('index') }}" class="nav-link"><i class="fas fa-arrow-left"></i> Back to Dashboard</a>
{% endblock %}

{% block content %}
<div class="platforms-container">
    <div class="page-title-container">
        <h1><i class="fas fa-medal"></i> Platform Priority Ratings</h1>
    </div>
    <table>
        <thead>
            <tr>
                <th>Platform Name</th>
                <th>User Count</th>
                <th>Priority Score</th>
                <th>Rating</th>
            </tr>
        </thead>
        <tbody>
            {% for platform in platforms %}
            <tr>
                <td><strong>{{ platform.name }}</strong></td>
                <td>{{ platform.registered_users }}</td>
                <td>{{ "%.2f"|format(platform.priority_rating) }}</td>
                <td style="width: 30%;">
                    <div class="score-bar-container">
                         <!-- Simple visualization; max score is arbitrary, adjust as needed -->
                        <div class="score-bar" style="width: {{ [100, (platform.priority_rating / 10) * 100]|min }}%;"></div>
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" style="text-align: center;">No platforms found. Run 'flask seed' and add relationships.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}